#
# Copyright 2021-2023 Aklivity Inc
#
# Licensed under the Aklivity Community License (the "License"); you may not use
# this file except in compliance with the License.  You may obtain a copy of the
# License at
#
#   https://www.aklivity.io/aklivity-community-license/
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
# WARRANTIES OF ANY KIND, either express or implied.  See the License for the
# specific language governing permissions and limitations under the License.
#

---
name: test
telemetry:
    exporters:
        stdout0:
            type: stdout
guards:
    jwt0:
        type: jwt
        options:
            issuer: https://auth.example.com
            audience: https://api.example.com
            keys:
                - kty: RSA
                  n: qqEu50hX+43Bx4W1UYWnAVKwFm+vDbP0kuIOSLVNa+HKQdHTf+3Sei5UCnkskn796izA29D0DdCy3ET9oaKRHIJyKbqFl0rv6f516QzOoXKC6N01sXBHBE/ovs0wwDvlaW+gFGPgkzdcfUlyrWLDnLV7LcuQymhTND2uH0oR3wJnNENN/OFgM1KGPPDOe19YsIKdLqARgxrhZVsh06OurEviZTXOBFI5r+yac7haDwOQhLHXNv+Y9MNvxs5QLWPFIM3bNUWfYrJnLrs4hGJS+y/KDM9Si+HL30QAFXy4YNO33J8DHjZ7ddG5n8/FqplOKvRtUgjcKWlxoGY4VdVaDQ==
                  e: AQAB
                  alg: RS256
                  kid: example
bindings:
    net0:
        type: http
        kind: server
        options:
            versions:
                - http/1.1
            authorization:
                jwt0:
                    credentials:
                        cookies:
                            access_token: "{credentials}"
                        headers:
                            authorization: Bearer {credentials}
                        query:
                            access_token: "{credentials}"
        routes:
            - exit: app0
              guarded:
                  jwt0: []
